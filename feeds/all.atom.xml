<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Tech Notes</title><link href="http://xiaojianfeng.github.io/" rel="alternate"></link><link href="http://xiaojianfeng.github.io/feeds/all.atom.xml" rel="self"></link><id>http://xiaojianfeng.github.io/</id><updated>2015-07-19T00:25:00+08:00</updated><entry><title>use alternative mirror for macports</title><link href="http://xiaojianfeng.github.io/code/use-alternative-mirror-for-macports.html" rel="alternate"></link><updated>2015-07-19T00:25:00+08:00</updated><author><name>Xiao Jianfeng</name></author><id>tag:xiaojianfeng.github.io,2015-07-19:code/use-alternative-mirror-for-macports.html</id><summary type="html">&lt;h3&gt;modify /opt/local/etc/macports/macports.conf&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;# The rsync server for fetching MacPorts base during selfupdate. This
# setting is NOT used when downloading the ports tree; the sources for
# the ports tree are set in sources.conf. See
# https://trac.macports.org/wiki/Mirrors#MacPortsSource for a list of
# available servers.
#rsync_server           rsync.macports.org
rsync_server            mirrors.ustc.edu.cn
# rsync_server          mirror.bit.edu.cn

# Location of MacPorts base sources on rsync_server. If this references
# a .tar file, a signed .rmd160 file must exist in the same directory
# and will be used to verify its integrity. See
# https://trac.macports.org/wiki/Mirrors#MacPortsSource to find the
# correct rsync_dir for a particular rsync_server.
#rsync_dir              release/tarballs/base.tar
# mirrors.ustc.edu.cn
rsync_dir               macports/base/
# mirror.bit.edu.cn
# rsync_dir             macports/release/ports/
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;modify /opt/local/etc/macports/sources.conf&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="nx"&gt;A&lt;/span&gt; &lt;span class="nx"&gt;list&lt;/span&gt; &lt;span class="nx"&gt;of&lt;/span&gt; &lt;span class="nx"&gt;rsync&lt;/span&gt; &lt;span class="nx"&gt;mirrors&lt;/span&gt; &lt;span class="nx"&gt;is&lt;/span&gt; &lt;span class="nx"&gt;available&lt;/span&gt; &lt;span class="nx"&gt;at&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="nx"&gt;https&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="c1"&gt;//trac.macports.org/wiki/Mirrors#Portfiles.&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="nx"&gt;If&lt;/span&gt; &lt;span class="nx"&gt;an&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;rsync://&amp;quot;&lt;/span&gt; &lt;span class="nx"&gt;URL&lt;/span&gt; &lt;span class="nx"&gt;points&lt;/span&gt; &lt;span class="nx"&gt;to&lt;/span&gt; &lt;span class="nx"&gt;a&lt;/span&gt; &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;tar&lt;/span&gt; &lt;span class="nx"&gt;file&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;a&lt;/span&gt; &lt;span class="nx"&gt;signed&lt;/span&gt; &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;rmd160&lt;/span&gt; &lt;span class="nx"&gt;file&lt;/span&gt; &lt;span class="nx"&gt;must&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="nx"&gt;exist&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="nx"&gt;the&lt;/span&gt; &lt;span class="nx"&gt;same&lt;/span&gt; &lt;span class="nx"&gt;directory&lt;/span&gt; &lt;span class="nx"&gt;on&lt;/span&gt; &lt;span class="nx"&gt;the&lt;/span&gt; &lt;span class="nx"&gt;server&lt;/span&gt; &lt;span class="nx"&gt;and&lt;/span&gt; &lt;span class="nx"&gt;will&lt;/span&gt; &lt;span class="nx"&gt;be&lt;/span&gt; &lt;span class="nx"&gt;used&lt;/span&gt; &lt;span class="nx"&gt;to&lt;/span&gt; &lt;span class="nx"&gt;verify&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="nx"&gt;its&lt;/span&gt; &lt;span class="nx"&gt;integrity&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="nx"&gt;For&lt;/span&gt; &lt;span class="nx"&gt;proper&lt;/span&gt; &lt;span class="nx"&gt;functionality&lt;/span&gt; &lt;span class="nx"&gt;of&lt;/span&gt; &lt;span class="nx"&gt;various&lt;/span&gt; &lt;span class="nx"&gt;resources&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;port&lt;/span&gt; &lt;span class="nx"&gt;groups&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;mirror&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="nx"&gt;sites&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;etc&lt;/span&gt;&lt;span class="p"&gt;.),&lt;/span&gt; &lt;span class="nx"&gt;the&lt;/span&gt; &lt;span class="nx"&gt;primary&lt;/span&gt; &lt;span class="nx"&gt;MacPorts&lt;/span&gt; &lt;span class="nx"&gt;source&lt;/span&gt; &lt;span class="nx"&gt;must&lt;/span&gt; &lt;span class="nx"&gt;always&lt;/span&gt; &lt;span class="nx"&gt;be&lt;/span&gt; &lt;span class="nx"&gt;tagged&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;[&lt;/span&gt;&lt;span class="nb"&gt;default&lt;/span&gt;&lt;span class="cp"&gt;]&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;even&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nx"&gt;switched&lt;/span&gt; &lt;span class="nx"&gt;from&lt;/span&gt; &lt;span class="nx"&gt;the&lt;/span&gt; &lt;span class="k"&gt;default&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;rsync://&amp;quot;&lt;/span&gt; &lt;span class="nx"&gt;URL&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;

&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="nx"&gt;rsync&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="c1"&gt;//rsync.macports.org/release/tarballs/ports.tar &lt;/span&gt;&lt;span class="cp"&gt;[&lt;/span&gt;&lt;span class="nb"&gt;default&lt;/span&gt;&lt;span class="cp"&gt;]&lt;/span&gt;&lt;span class="c1"&gt;&lt;/span&gt;
&lt;span class="nx"&gt;rsync&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="c1"&gt;//mirrors.ustc.edu.cn/macports/ports &lt;/span&gt;&lt;span class="cp"&gt;[&lt;/span&gt;&lt;span class="nb"&gt;default&lt;/span&gt;&lt;span class="cp"&gt;]&lt;/span&gt;&lt;span class="c1"&gt; &lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="nx"&gt;rsync&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="c1"&gt;//mirror.bit.edu.cn/macports/release/ports/ &lt;/span&gt;&lt;span class="cp"&gt;[&lt;/span&gt;&lt;span class="nb"&gt;default&lt;/span&gt;&lt;span class="cp"&gt;]&lt;/span&gt;&lt;span class="c1"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</summary></entry><entry><title>GNU make - how to get 2nd or 3rd prerequisite file</title><link href="http://xiaojianfeng.github.io/code/gnu-make-how-to-get-2nd-or-3rd-prerequisite-file.html" rel="alternate"></link><updated>2015-07-02T00:03:00+08:00</updated><author><name>Xiao Jianfeng</name></author><id>tag:xiaojianfeng.github.io,2015-07-02:code/gnu-make-how-to-get-2nd-or-3rd-prerequisite-file.html</id><summary type="html">&lt;p&gt;在写&lt;code&gt;makefile&lt;/code&gt;的时候，有时候依赖文件有多个，并且需要分别使用。例如，需要把两个vcf合并（两个vcf文件是对应不同染色体的，所以直接cat就可以，但是对于第二个vcf文件不需要开头的行首为‘#’的meta信息部分。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;target&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;vcf1&lt;/span&gt; &lt;span class="n"&gt;vcf2&lt;/span&gt;
    &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cat&lt;/span&gt; &lt;span class="n"&gt;vcf1&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;cat&lt;/span&gt; &lt;span class="n"&gt;vcf2&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;grep&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;#&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;bgzip&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;$&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;简单一点的写法是：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;target： vcf1 vcf2
    (cat $&amp;lt;; cat $(word 2,$^) | grep -v &amp;#39;#&amp;#39;) | bgzip &amp;gt; $@
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;多个依赖文件就有点不太方：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;target： vcf1 vcf2 vcf3
    (cat $&amp;lt;; cat $(word 2,$^) $(word 3,$^) | grep -v &amp;#39;#&amp;#39;) | bgzip &amp;gt; $@
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;这时候可以用 &lt;code&gt;$(filter-out)&lt;/code&gt;函数&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;target&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;vcf1&lt;/span&gt; &lt;span class="n"&gt;vcf2&lt;/span&gt; &lt;span class="n"&gt;vcf3&lt;/span&gt;
    &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cat&lt;/span&gt; &lt;span class="n"&gt;$&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;;&lt;/span&gt; &lt;span class="n"&gt;cat&lt;/span&gt; &lt;span class="n"&gt;$&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;filter&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;out&lt;/span&gt; &lt;span class="n"&gt;$&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;,&lt;/span&gt;&lt;span class="n"&gt;$&lt;/span&gt;&lt;span class="o"&gt;^)&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;grep&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;#&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;bgzip&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;$&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</summary></entry><entry><title>exome sequencing for newborn screening</title><link href="http://xiaojianfeng.github.io/clinical/exome-sequencing-for-newborn-screening.html" rel="alternate"></link><updated>2015-06-25T23:22:00+08:00</updated><author><name>Xiao Jianfeng</name></author><id>tag:xiaojianfeng.github.io,2015-06-25:clinical/exome-sequencing-for-newborn-screening.html</id><summary type="html">&lt;p&gt;今天看到一个消息，美国一家叫做Baby Genes的公司准备推广运用全外显子组测序进行新生儿筛查。我觉得这是一个大趋势:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;外显子测序越来越便宜，现在外显子组测序成本大概四千人民币，再过几年假如价格再降一些，大家也更有钱一些，价格就越来越不是问题了。&lt;/li&gt;
&lt;li&gt;外显子组数据分析，包括方法和临床表型与基因型关联信息的数据集的进步，使得外显子组测序变得越来越容易，门槛越来越低&lt;/li&gt;
&lt;li&gt;外显子组测序能一次性解读绝大部分的遗传病（有一些遗传病还没有找到相关基因，还有一些遗传病的相关的区域不在外显子区域）
拭目以待。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;另外，复旦儿童医院在2015年的中华询证儿科杂志（？）上发表了一系列的介绍外显子测序临床应用的文章，值得一读。&lt;/p&gt;</summary></entry><entry><title>GNU Make - multiple targets in one recipe and parallel execution</title><link href="http://xiaojianfeng.github.io/code/gnu-make-multiple-targets-in-one-recipe-and-parallel-execution.html" rel="alternate"></link><updated>2015-06-19T22:56:00+08:00</updated><author><name>Xiao Jianfeng</name></author><id>tag:xiaojianfeng.github.io,2015-06-19:code/gnu-make-multiple-targets-in-one-recipe-and-parallel-execution.html</id><summary type="html">&lt;p&gt;Inspired by &lt;code&gt;http://stackoverflow.com/questions/19822435/multiple-targets-from-one-recipe-and-parallel-execution.&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;很多时候，写&lt;code&gt;makefile&lt;/code&gt;的时候，一条rule可以产生多个target，但是这样有一个问题，假如这些target不是pattern rules，make对于其中每一个target，都会运行一次recipe。&lt;/p&gt;
&lt;p&gt;例如：
    bwa: hg19.fa.amb hg19.fa.ann hg19.fa.bwt hg19.fa.pac hg19.fa.sa&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;hg19.fa.amb hg19.fa.ann hg19.fa.bwt hg19.fa.pac hg19.fa.sa: hg19.fa
    bwa index -a bwtsw $&amp;lt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;当执行的时候，无论是否并行，&lt;code&gt;bwa index&lt;/code&gt;命令都会被执行多次。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&amp;gt; make -n bwa
bwa index -a bwtsw hg19.fa
bwa index -a bwtsw hg19.fa
bwa index -a bwtsw hg19.fa
bwa index -a bwtsw hg19.fa
bwa index -a bwtsw hg19.fa
&amp;gt; make -j 5 -n bwa
bwa index -a bwtsw hg19.fa
bwa index -a bwtsw hg19.fa
bwa index -a bwtsw hg19.fa
bwa index -a bwtsw hg19.fa
bwa index -a bwtsw hg19.fa
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;解决的办法有两个。&lt;/p&gt;
&lt;p&gt;第一种是当多个target可以写成&lt;code&gt;pattern rule&lt;/code&gt;的时候：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;bwa&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;hg19&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;fa&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;amb&lt;/span&gt; &lt;span class="n"&gt;hg19&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;fa&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;ann&lt;/span&gt; &lt;span class="n"&gt;hg19&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;fa&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;bwt&lt;/span&gt; &lt;span class="n"&gt;hg19&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;fa&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;pac&lt;/span&gt; &lt;span class="n"&gt;hg19&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;fa&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;sa&lt;/span&gt;

&lt;span class="o"&gt;%.&lt;/span&gt;&lt;span class="n"&gt;fa&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;amb&lt;/span&gt; &lt;span class="o"&gt;%.&lt;/span&gt;&lt;span class="n"&gt;fa&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;ann&lt;/span&gt; &lt;span class="o"&gt;%.&lt;/span&gt;&lt;span class="n"&gt;fa&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;bwt&lt;/span&gt; &lt;span class="o"&gt;%.&lt;/span&gt;&lt;span class="n"&gt;fa&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;pac&lt;/span&gt; &lt;span class="o"&gt;%.&lt;/span&gt;&lt;span class="n"&gt;fa&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;sa&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="o"&gt;%.&lt;/span&gt;&lt;span class="n"&gt;fa&lt;/span&gt;
      &lt;span class="n"&gt;bwa&lt;/span&gt; &lt;span class="n"&gt;index&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="n"&gt;bwtsw&lt;/span&gt; &lt;span class="n"&gt;$&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;make&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="n"&gt;bwa&lt;/span&gt;
&lt;span class="n"&gt;bwa&lt;/span&gt; &lt;span class="n"&gt;index&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="n"&gt;bwtsw&lt;/span&gt; &lt;span class="n"&gt;hg19&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;fa&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;make&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt; &lt;span class="n"&gt;bwa&lt;/span&gt;
&lt;span class="n"&gt;bwa&lt;/span&gt; &lt;span class="n"&gt;index&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="n"&gt;bwtsw&lt;/span&gt; &lt;span class="n"&gt;hg19&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;fa&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;第二种方法是上面提到的网页里面的方法，这个方法适应性更广，适合不能写成&lt;code&gt;pattern rule&lt;/code&gt;的情况。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;bwa&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;hg19&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;fa&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;amb&lt;/span&gt; &lt;span class="n"&gt;hg19&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;fa&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;ann&lt;/span&gt; &lt;span class="n"&gt;hg19&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;fa&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;bwt&lt;/span&gt; &lt;span class="n"&gt;hg19&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;fa&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;pac&lt;/span&gt; &lt;span class="n"&gt;hg19&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;fa&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;sa&lt;/span&gt;

&lt;span class="n"&gt;hg19&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;fa&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;amb&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;hg19&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;fa&lt;/span&gt;
    &lt;span class="n"&gt;bwa&lt;/span&gt; &lt;span class="n"&gt;index&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="n"&gt;bwtsw&lt;/span&gt; &lt;span class="n"&gt;$&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;touch&lt;/span&gt; &lt;span class="n"&gt;hg19&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;fa&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;ann&lt;/span&gt; &lt;span class="n"&gt;hg19&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;fa&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;bwt&lt;/span&gt; &lt;span class="n"&gt;hg19&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;fa&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;pac&lt;/span&gt; &lt;span class="n"&gt;hg19&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;fa&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;sa&lt;/span&gt;

&lt;span class="n"&gt;hg19&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;fa&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;ann&lt;/span&gt; &lt;span class="n"&gt;hg19&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;fa&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;bwt&lt;/span&gt; &lt;span class="n"&gt;hg19&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;fa&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;pac&lt;/span&gt; &lt;span class="n"&gt;hg19&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;fa&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;sa&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;hg19&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;fa&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;amb&lt;/span&gt;

&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;make&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="n"&gt;bwa&lt;/span&gt;
&lt;span class="n"&gt;bwa&lt;/span&gt; &lt;span class="n"&gt;index&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="n"&gt;bwtsw&lt;/span&gt; &lt;span class="n"&gt;hg19&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;fa&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;touch&lt;/span&gt; &lt;span class="n"&gt;hg19&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;fa&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;ann&lt;/span&gt; &lt;span class="n"&gt;hg19&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;fa&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;bwt&lt;/span&gt; &lt;span class="n"&gt;hg19&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;fa&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;pac&lt;/span&gt; &lt;span class="n"&gt;hg19&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;fa&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;sa&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;make&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt; &lt;span class="n"&gt;bwa&lt;/span&gt;
&lt;span class="n"&gt;bwa&lt;/span&gt; &lt;span class="n"&gt;index&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="n"&gt;bwtsw&lt;/span&gt; &lt;span class="n"&gt;hg19&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;fa&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;touch&lt;/span&gt; &lt;span class="n"&gt;hg19&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;fa&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;ann&lt;/span&gt; &lt;span class="n"&gt;hg19&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;fa&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;bwt&lt;/span&gt; &lt;span class="n"&gt;hg19&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;fa&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;pac&lt;/span&gt; &lt;span class="n"&gt;hg19&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;fa&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;sa&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;解释一下，&lt;code&gt;hg19.fa.amb: hg19.fa&lt;/code&gt;只把hg19.fa.amb当做target，但是命令&lt;code&gt;bwa index&lt;/code&gt;生成了所有其余的target，包括hag9.fa.ann等文件，接下来命令&lt;code&gt;touch&lt;/code&gt;重新改变了剩余几个文件的修改时间，使得它们比hg19.fa.amb更新，于是最后一个rule是已经满足了不需要被执行的。&lt;/p&gt;
&lt;p&gt;进一步改进一下，写成更通用的形式：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;bwa_obj = hg19.fa.amb hg19.fa.ann hg19.fa.bwt hg19.fa.pac hg19.fa.sa

bwa: $(bwa_obj)

first_obj = $(firstword $(bwa_obj))
rest_obj  = $(wordlist 2,$(words $(bwa_obj)),$(bwa_obj))

$(first_obj): hg19.fa
    bwa index -a bwtsw hg19.fa &amp;amp;&amp;amp; touch $(rest_obj)
$(rest_obj): $(first_obj)

&amp;gt; make -n bwa
bwa index -a bwtsw hg19.fa &amp;amp;&amp;amp; touch hg19.fa.ann hg19.fa.bwt hg19.fa.pac hg19.fa.sa
&amp;gt; make -n -j 5 bwa
bwa index -a bwtsw hg19.fa &amp;amp;&amp;amp; touch hg19.fa.ann hg19.fa.bwt hg19.fa.pac hg19.fa.sa
&lt;/pre&gt;&lt;/div&gt;</summary></entry><entry><title>Why slideshare was blocked ...?</title><link href="http://xiaojianfeng.github.io/code/why-slideshare-was-blocked.html" rel="alternate"></link><updated>2015-05-09T22:19:00+08:00</updated><author><name>Xiao Jianfeng</name></author><id>tag:xiaojianfeng.github.io,2015-05-09:code/why-slideshare-was-blocked.html</id><summary type="html">&lt;p&gt;为什么slideshare也有被封的价值。。。？！&lt;/p&gt;</summary></entry><entry><title>case insenstivity on MAC OS X</title><link href="http://xiaojianfeng.github.io/mac/case-insenstivity-on-mac-os-x.html" rel="alternate"></link><updated>2015-05-07T09:28:00+08:00</updated><author><name>Xiao Jianfeng</name></author><id>tag:xiaojianfeng.github.io,2015-05-07:mac/case-insenstivity-on-mac-os-x.html</id><summary type="html">&lt;p&gt;http://apple.stackexchange.com/questions/22297/is-bash-in-osx-case-insensitive&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;HFS+ (the Mac filesystem) is usually configured to be case insensitive but case preserving. This means that the file system will consider foo and FoO to be the same, but when you create a new file it will remember which letters where capitalized and which were not.

When you format a disk with HFS+ you can chose whether the file system should case sensitive or not. If you chose to format with UFS (Unix FileSystem) it is always case sensitive, AFAIK.

To check whether a disk is case sensitive, run:

diskutil info &amp;lt;device&amp;gt;

For example:

diskutil info disk0s2

Look for the Name: line. If it reads something like Mac OS Extended (Case-sensitive, Journaled) it means that it is case-sensitive. If it just reads Mac OS Extended (without the Case-sensitive) then it is only case preserving but not case sensitive.
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;On my computer:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&amp;gt; diskutil info /dev/disk1 | grep Name
Device / Media Name:      Macintosh HD
Volume Name:              Macintosh HD
Name (User Visible):      Mac OS Extended (Journaled)
&amp;gt;
&lt;/pre&gt;&lt;/div&gt;</summary></entry><entry><title>if you don't want your hostname to be modifed by DHCP</title><link href="http://xiaojianfeng.github.io/mac/if-you-dont-want-your-hostname-to-be-modifed-by-dhcp.html" rel="alternate"></link><updated>2015-04-13T23:36:00+08:00</updated><author><name>Xiao Jianfeng</name></author><id>tag:xiaojianfeng.github.io,2015-04-13:mac/if-you-dont-want-your-hostname-to-be-modifed-by-dhcp.html</id><summary type="html">&lt;p&gt;It can be annoying to see my hostname being modifed each time I connect to a different WIFI. It is because the hostname was never set.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&amp;gt; username@bogon[s002] ~&amp;gt; scutil --get HostName 
&amp;gt; HostName: not set
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;So we just need to set the hostname:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&amp;gt; username@bogon[s002] ~&amp;gt; sudo scutil --set HostName &amp;quot;new_hostname&amp;quot;  
&amp;gt; Password:  
&amp;gt; username@bogon[s002] ~&amp;gt; scutil --get HostName              
&amp;gt; new_hostname  
&amp;gt; username@bogon[s002] ~&amp;gt;
&lt;/pre&gt;&lt;/div&gt;</summary></entry><entry><title>disable local backup of timemachine</title><link href="http://xiaojianfeng.github.io/mac/disable-local-backup-of-timemachine.html" rel="alternate"></link><updated>2015-04-11T11:55:00+08:00</updated><author><name>Xiao Jianfeng</name></author><id>tag:xiaojianfeng.github.io,2015-04-11:mac/disable-local-backup-of-timemachine.html</id><summary type="html">&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Finder -&amp;gt; goto "/Volumes" will see a backup disk&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;"sudo tmutil disablelocal" will disable local cache of time machine&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;"sudo tmutil enablelocal" will enable it again&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;</summary></entry><entry><title>how to re-attach a lftp process</title><link href="http://xiaojianfeng.github.io/code/how-to-re-attach-a-lftp-process.html" rel="alternate"></link><updated>2015-04-05T17:00:00+08:00</updated><author><name>Xiao Jianfeng</name></author><id>tag:xiaojianfeng.github.io,2015-04-05:code/how-to-re-attach-a-lftp-process.html</id><summary type="html">&lt;p&gt;lftp很好的一个功能是退出之后，正在运行的任务会自动提交到后台继续运行。&lt;/p&gt;
&lt;p&gt;但是有时候想重新连接这些任务，lftp提供了一个很好的命令attach。首先用ps查到要连接的任务的pid;
然后打开lftp，运行“attach The_PID”。搞定。&lt;/p&gt;</summary></entry><entry><title>run job with at on Mac</title><link href="http://xiaojianfeng.github.io/code/run-job-with-at-on-mac.html" rel="alternate"></link><updated>2015-04-01T11:16:00+08:00</updated><author><name>Xiao Jianfeng</name></author><id>tag:xiaojianfeng.github.io,2015-04-01:code/run-job-with-at-on-mac.html</id><summary type="html">&lt;p&gt;"at" on Mac is run by atrun, which is invoked by launchd. The problem is atrun is not running by default.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;The&lt;/span&gt; &lt;span class="n"&gt;atrun&lt;/span&gt; &lt;span class="n"&gt;utility&lt;/span&gt; &lt;span class="n"&gt;runs&lt;/span&gt; &lt;span class="n"&gt;commands&lt;/span&gt; &lt;span class="n"&gt;queued&lt;/span&gt; &lt;span class="n"&gt;by&lt;/span&gt; &lt;span class="n"&gt;at&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;  &lt;span class="n"&gt;It&lt;/span&gt; &lt;span class="n"&gt;is&lt;/span&gt; &lt;span class="n"&gt;invoked&lt;/span&gt; &lt;span class="n"&gt;periodically&lt;/span&gt; &lt;span class="n"&gt;by&lt;/span&gt; &lt;span class="n"&gt;launchd&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;as&lt;/span&gt; &lt;span class="n"&gt;specified&lt;/span&gt; &lt;span class="n"&gt;in&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;apple&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;atrun&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;plist&lt;/span&gt; &lt;span class="n"&gt;property&lt;/span&gt; &lt;span class="n"&gt;list&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;  &lt;span class="n"&gt;By&lt;/span&gt; &lt;span class="k"&gt;default&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;property&lt;/span&gt; &lt;span class="n"&gt;list&lt;/span&gt; &lt;span class="n"&gt;contains&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;Disabled&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt; &lt;span class="n"&gt;set&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="nb"&gt;true&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;so&lt;/span&gt; &lt;span class="n"&gt;atrun&lt;/span&gt; &lt;span class="n"&gt;is&lt;/span&gt; &lt;span class="n"&gt;never&lt;/span&gt; &lt;span class="n"&gt;invoked&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;

&lt;span class="n"&gt;Execute&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;following&lt;/span&gt; &lt;span class="n"&gt;command&lt;/span&gt; &lt;span class="n"&gt;as&lt;/span&gt; &lt;span class="n"&gt;root&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;enable&lt;/span&gt; &lt;span class="n"&gt;atrun&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;  
    &lt;span class="n"&gt;launchctl&lt;/span&gt; &lt;span class="n"&gt;load&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;w&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Library&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;LaunchDaemons&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;apple&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;atrun&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;plist&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;After that, you can use "at" to submit job on Mac.&lt;/p&gt;</summary></entry><entry><title>install docker on Mac OS X 10.10</title><link href="http://xiaojianfeng.github.io/code/install-docker-on-mac-os-x-1010.html" rel="alternate"></link><updated>2015-03-25T13:46:00+08:00</updated><author><name>Xiao Jianfeng</name></author><id>tag:xiaojianfeng.github.io,2015-03-25:code/install-docker-on-mac-os-x-1010.html</id><summary type="html">&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;install boot2docker &lt;/p&gt;
&lt;p&gt;Go to https://github.com/boot2docker/osx-installer/releases, and download boot2docker v1.5.0.&lt;/p&gt;
&lt;p&gt;The docker and boot2docker binaries are in /usr/local/bin which you can access from your terminal. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;launch boot2docker.app, which will open a terminal window. And run &lt;code&gt;docker run hello-world&lt;/code&gt; to check if the installation succeeds or not.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;You can upgrade your existing Boot2Docker VM without data loss by running: &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;boot2docker upgrade&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Create a new Boot2Docker VM.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;boot2docker init&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;This will create a new virtual machine on "~/VirtualBox VMs/boot2docker-vm". You only need to run this command once.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;start boot2docker VM.&lt;/p&gt;
&lt;p&gt;boot2docker start&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;display the environment variables for docker&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;boot2docker shellinit
Writing /Users/username/.boot2docker/certs/boot2docker-vm/ca.pem  &lt;br /&gt;
Writing /Users/username/.boot2docker/certs/boot2docker-vm/cert.pem  &lt;br /&gt;
Writing /Users/username/.boot2docker/certs/boot2docker-vm/key.pem  &lt;br /&gt;
export DOCKER_CERT_PATH=/Users/username/.boot2docker/certs/boot2docker-vm  &lt;br /&gt;
export DOCKER_TLS_VERIFY=1  &lt;br /&gt;
export DOCKER_HOST=tcp://192.168.59.103:2376    &lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;if &lt;code&gt;env | grep docker&lt;/code&gt; doesn't show 3 settings, you should set variables for docker.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;$(boot2docker shellinit)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;start to work with docker.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;close the boot2docker image.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;boot2docker stop&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ol&gt;</summary></entry><entry><title>export mail in .ost file to mail.app on Mac</title><link href="http://xiaojianfeng.github.io/utils/export-mail-in-ost-file-to-mailapp-on-mac.html" rel="alternate"></link><updated>2015-03-24T14:10:00+08:00</updated><author><name>Xiao Jianfeng</name></author><id>tag:xiaojianfeng.github.io,2015-03-24:utils/export-mail-in-ost-file-to-mailapp-on-mac.html</id><summary type="html">&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;export mail in .ost file to mbox file (the file may not end with .mbox).  &lt;/p&gt;
&lt;p&gt;readpst -j 3 outlook.ost &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;mail.app --&amp;gt; File --&amp;gt; import mailboxes, and select the folder generated in step 1.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;That's all. Your emails in the ost file will be imported into a directory under "on my Mac".&lt;/p&gt;</summary></entry><entry><title>common mistakes in bioinformatics</title><link href="http://xiaojianfeng.github.io/bioinf/common-mistakes-in-bioinformatics.html" rel="alternate"></link><updated>2015-03-14T16:03:00+08:00</updated><author><name>Xiao Jianfeng</name></author><id>tag:xiaojianfeng.github.io,2015-03-14:bioinf/common-mistakes-in-bioinformatics.html</id><summary type="html">&lt;p&gt;This nice thread(https://www.biostars.org/p/7126/) summarized a lot of common mistakes people (including me, of course) might make in daily work.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;forget&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;check&lt;/span&gt; &lt;span class="n"&gt;both&lt;/span&gt; &lt;span class="n"&gt;strands&lt;/span&gt;
&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;generate&lt;/span&gt; &lt;span class="n"&gt;random&lt;/span&gt; &lt;span class="n"&gt;genomic&lt;/span&gt; &lt;span class="n"&gt;sites&lt;/span&gt; &lt;span class="n"&gt;without&lt;/span&gt; &lt;span class="n"&gt;avoiding&lt;/span&gt; &lt;span class="n"&gt;masked&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;NNN&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;gaps&lt;/span&gt;
&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;confuse&lt;/span&gt; &lt;span class="n"&gt;genome&lt;/span&gt; &lt;span class="n"&gt;freezes&lt;/span&gt; &lt;span class="n"&gt;and&lt;/span&gt; &lt;span class="n"&gt;even&lt;/span&gt; &lt;span class="n"&gt;species&lt;/span&gt;
&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="n"&gt;lot&lt;/span&gt; &lt;span class="n"&gt;of&lt;/span&gt; &lt;span class="n"&gt;off&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;by&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;one&lt;/span&gt; &lt;span class="n"&gt;errors&lt;/span&gt; &lt;span class="n"&gt;due&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;switching&lt;/span&gt; &lt;span class="n"&gt;between&lt;/span&gt; &lt;span class="n"&gt;formats&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Bed&lt;/span&gt; &lt;span class="n"&gt;is&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="n"&gt;based&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;  &lt;span class="n"&gt;GFF&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;GTF&lt;/span&gt; &lt;span class="n"&gt;are&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;based&lt;/span&gt;  
&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;Trusting&lt;/span&gt; &lt;span class="n"&gt;that&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="n"&gt;downloaded&lt;/span&gt; &lt;span class="n"&gt;file&lt;/span&gt; &lt;span class="n"&gt;is&lt;/span&gt; &lt;span class="n"&gt;actually&lt;/span&gt; &lt;span class="n"&gt;fully&lt;/span&gt; &lt;span class="n"&gt;downloaded&lt;/span&gt;
&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;Trusting&lt;/span&gt; &lt;span class="n"&gt;that&lt;/span&gt; &lt;span class="n"&gt;an&lt;/span&gt; &lt;span class="n"&gt;aligner&lt;/span&gt; &lt;span class="n"&gt;will&lt;/span&gt; &lt;span class="n"&gt;accept&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="n"&gt;list&lt;/span&gt; &lt;span class="n"&gt;of&lt;/span&gt; &lt;span class="n"&gt;query&lt;/span&gt; &lt;span class="n"&gt;files&lt;/span&gt; &lt;span class="n"&gt;instead&lt;/span&gt; &lt;span class="n"&gt;of&lt;/span&gt; &lt;span class="n"&gt;just&lt;/span&gt; &lt;span class="n"&gt;taking&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;first&lt;/span&gt; &lt;span class="n"&gt;and&lt;/span&gt; &lt;span class="n"&gt;ignoring&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;rest&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;quiz&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;which&lt;/span&gt; &lt;span class="n"&gt;ones&lt;/span&gt; &lt;span class="n"&gt;am&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="n"&gt;talking&lt;/span&gt; &lt;span class="n"&gt;about&lt;/span&gt;&lt;span class="o"&gt;?&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;Assuming&lt;/span&gt; &lt;span class="n"&gt;that&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;quality&lt;/span&gt; &lt;span class="n"&gt;scores&lt;/span&gt; &lt;span class="n"&gt;in&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="n"&gt;FASTQ&lt;/span&gt; &lt;span class="n"&gt;file&lt;/span&gt; &lt;span class="n"&gt;are&lt;/span&gt; &lt;span class="n"&gt;from&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="n"&gt;great&lt;/span&gt; &lt;span class="n"&gt;Sanger&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;encoded&lt;/span&gt; &lt;span class="n"&gt;run&lt;/span&gt; &lt;span class="n"&gt;instead&lt;/span&gt; &lt;span class="n"&gt;of&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="n"&gt;very&lt;/span&gt; &lt;span class="n"&gt;poor&lt;/span&gt; &lt;span class="n"&gt;Illumina&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;1.3&lt;/span&gt; &lt;span class="n"&gt;run&lt;/span&gt;
&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;Assuming&lt;/span&gt; &lt;span class="n"&gt;chr1&lt;/span&gt; &lt;span class="n"&gt;is&lt;/span&gt; &lt;span class="n"&gt;followed&lt;/span&gt; &lt;span class="n"&gt;by&lt;/span&gt; &lt;span class="n"&gt;chr2&lt;/span&gt; &lt;span class="n"&gt;not&lt;/span&gt; &lt;span class="n"&gt;chr10&lt;/span&gt;
&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;off&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;by&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;one&lt;/span&gt; &lt;span class="n"&gt;errors&lt;/span&gt;
&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;regex&lt;/span&gt; &lt;span class="n"&gt;errors&lt;/span&gt;
&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;parsing&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="n"&gt;complex&lt;/span&gt; &lt;span class="n"&gt;alignment&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt; &lt;span class="n"&gt;format&lt;/span&gt; &lt;span class="n"&gt;incorrectly&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;g&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt; &lt;span class="n"&gt;BLAST&lt;/span&gt; &lt;span class="n"&gt;or&lt;/span&gt; &lt;span class="n"&gt;GenBank&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;probably&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;original&lt;/span&gt; &lt;span class="n"&gt;rationale&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;developing&lt;/span&gt; &lt;span class="n"&gt;BioPerl&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;failing&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;account&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;strand&lt;/span&gt;
&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;failing&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;revcomp&lt;/span&gt; &lt;span class="n"&gt;sequences&lt;/span&gt;
&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;failing&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;account&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;last&lt;/span&gt; &lt;span class="n"&gt;element&lt;/span&gt; &lt;span class="n"&gt;in&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="n"&gt;file&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;because&lt;/span&gt; &lt;span class="n"&gt;of&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="n"&gt;improper&lt;/span&gt; &lt;span class="n"&gt;loop&lt;/span&gt; &lt;span class="n"&gt;condition&lt;/span&gt; &lt;span class="n"&gt;or&lt;/span&gt; &lt;span class="n"&gt;no&lt;/span&gt; &lt;span class="n"&gt;EOL&lt;/span&gt; &lt;span class="n"&gt;character&lt;/span&gt; &lt;span class="n"&gt;on&lt;/span&gt; &lt;span class="n"&gt;last&lt;/span&gt; &lt;span class="n"&gt;line&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;failing&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;account&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;OS&lt;/span&gt; &lt;span class="n"&gt;dependent&lt;/span&gt; &lt;span class="n"&gt;line&lt;/span&gt; &lt;span class="n"&gt;breaks&lt;/span&gt;
&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;using&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;wrong&lt;/span&gt; &lt;span class="n"&gt;assembly&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;annotation&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;release&lt;/span&gt;
&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;using&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;wrong&lt;/span&gt; &lt;span class="n"&gt;genome&lt;/span&gt; &lt;span class="n"&gt;coordinate&lt;/span&gt; &lt;span class="n"&gt;system&lt;/span&gt;
&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;using&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;wrong&lt;/span&gt; &lt;span class="n"&gt;file&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;multiple&lt;/span&gt; &lt;span class="n"&gt;versions&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;version&lt;/span&gt; &lt;span class="n"&gt;skew&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;failing&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;account&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;nested&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;intercalated&lt;/span&gt; &lt;span class="n"&gt;annotation&lt;/span&gt; &lt;span class="n"&gt;features&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;g&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt; &lt;span class="n"&gt;genes&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;assuming&lt;/span&gt; &lt;span class="n"&gt;all&lt;/span&gt; &lt;span class="n"&gt;jobs&lt;/span&gt; &lt;span class="n"&gt;have&lt;/span&gt; &lt;span class="n"&gt;completed&lt;/span&gt; &lt;span class="n"&gt;on&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="n"&gt;cluster&lt;/span&gt;
&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;deleting&lt;/span&gt; &lt;span class="n"&gt;files&lt;/span&gt;
&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;not&lt;/span&gt; &lt;span class="n"&gt;randomizing&lt;/span&gt; &lt;span class="n"&gt;your&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt; &lt;span class="n"&gt;properly&lt;/span&gt;
&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;improper&lt;/span&gt; &lt;span class="n"&gt;use&lt;/span&gt; &lt;span class="n"&gt;of&lt;/span&gt; &lt;span class="n"&gt;statistical&lt;/span&gt; &lt;span class="n"&gt;tests&lt;/span&gt;
&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;not&lt;/span&gt; &lt;span class="n"&gt;documenting&lt;/span&gt; &lt;span class="n"&gt;methods&lt;/span&gt; &lt;span class="n"&gt;fully&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;check&lt;/span&gt; &lt;span class="n"&gt;and&lt;/span&gt; &lt;span class="n"&gt;correct&lt;/span&gt; &lt;span class="n"&gt;all&lt;/span&gt; &lt;span class="n"&gt;of&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;above&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;Run&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="n"&gt;batch&lt;/span&gt; &lt;span class="n"&gt;BLAST&lt;/span&gt; &lt;span class="n"&gt;job&lt;/span&gt; &lt;span class="n"&gt;and&lt;/span&gt; &lt;span class="n"&gt;forgetting&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;put&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;-o something.out&amp;quot;&lt;/span&gt; &lt;span class="n"&gt;option&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt; &lt;span class="n"&gt;Then&lt;/span&gt; &lt;span class="n"&gt;switching&lt;/span&gt; &lt;span class="n"&gt;off&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;monitor&lt;/span&gt; &lt;span class="n"&gt;and&lt;/span&gt; &lt;span class="n"&gt;coming&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;next&lt;/span&gt; &lt;span class="n"&gt;day&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;see&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="n"&gt;bunch&lt;/span&gt; &lt;span class="n"&gt;of&lt;/span&gt; &lt;span class="n"&gt;characters&lt;/span&gt; &lt;span class="n"&gt;in&lt;/span&gt; &lt;span class="n"&gt;my&lt;/span&gt; &lt;span class="n"&gt;terminal&lt;/span&gt;
&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;tar -zxvf&amp;quot;&lt;/span&gt; &lt;span class="n"&gt;without&lt;/span&gt; &lt;span class="n"&gt;checking&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;tar&lt;/span&gt; &lt;span class="n"&gt;file&lt;/span&gt; &lt;span class="n"&gt;before&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;I&lt;/span&gt; &lt;span class="n"&gt;have&lt;/span&gt; &lt;span class="n"&gt;decompressed&lt;/span&gt; &lt;span class="n"&gt;thousands&lt;/span&gt; &lt;span class="n"&gt;of&lt;/span&gt; &lt;span class="n"&gt;files&lt;/span&gt; &lt;span class="n"&gt;in&lt;/span&gt; &lt;span class="n"&gt;my&lt;/span&gt; &lt;span class="n"&gt;current&lt;/span&gt; &lt;span class="n"&gt;directory&lt;/span&gt; &lt;span class="n"&gt;assuming&lt;/span&gt; &lt;span class="n"&gt;they&lt;/span&gt; &lt;span class="n"&gt;came&lt;/span&gt; &lt;span class="n"&gt;in&lt;/span&gt; &lt;span class="n"&gt;their&lt;/span&gt; &lt;span class="n"&gt;own&lt;/span&gt; &lt;span class="n"&gt;folder&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Another very important one is: gene name might be hacked by MS Excel. &lt;/p&gt;
&lt;p&gt;There are 11 human gene names in March: MARCH1 to MARCH11, and one in December: DEC1. And excel will treat them as date!&lt;/p&gt;
&lt;p&gt;So make sure to ask excel to open data as text when working with gene names.&lt;/p&gt;
&lt;p&gt;Please refer to this paper for more info.&lt;/p&gt;
&lt;p&gt;1.Zeeberg, B. R. et al. Mistaken Identifiers: Gene name errors can be introduced inadvertently when using Excel in bioinformatics. BMC Bioinformatics 5, 80 (2004).  http://www.biomedcentral.com/1471-2105/5/80&lt;/p&gt;</summary></entry><entry><title>finally I moved to Mac</title><link href="http://xiaojianfeng.github.io/general/finally-i-moved-to-mac.html" rel="alternate"></link><updated>2015-01-20T16:09:27+08:00</updated><author><name>Xiao Jianfeng</name></author><id>tag:xiaojianfeng.github.io,2015-01-20:general/finally-i-moved-to-mac.html</id><summary type="html">&lt;p&gt;2014年年底，用了七年多的在最后一年从Windows转向Linux的T61因为nvidia显卡门报废，决定换成Mac了。&lt;/p&gt;
&lt;p&gt;理由很简单，我用电脑主要用来办公和编程。Windows因为有MS Office，办公不错，但是编程(包括数据处理)方面太差；Linux在编程方面很好，但是办公方面就是渣:只有Mac可以兼顾二者。&lt;/p&gt;</summary></entry><entry><title>create shortcurt key for ksnapshot</title><link href="http://xiaojianfeng.github.io/code/create-shortcurt-key-for-ksnapshot.html" rel="alternate"></link><updated>2014-08-14T23:27:51+08:00</updated><author><name>Xiao Jianfeng</name></author><id>tag:xiaojianfeng.github.io,2014-08-14:code/create-shortcurt-key-for-ksnapshot.html</id><summary type="html">&lt;p&gt;ksnapshot is a powerful tool to take snapshot. However, each time you have to start ksnapshot from the application menu, which is not as efficient as it should be.&lt;/p&gt;
&lt;p&gt;Here is how to create shortcut key for ksnapshot.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;go to "System Settings" --&amp;gt; "Shortcuts and Gestures" --&amp;gt; "Custom Shortcuts"
   --&amp;gt; "Preset Actions" --&amp;gt; "PrintScreen"&lt;/p&gt;
&lt;p&gt;set "Meta + S" (Win + S), which is the same as screen clipping shortcut for onenote on Windows, for Trigger;
   &lt;img alt="set shotcut key" src="/images/ksnapshot1.png" /&gt;&lt;/p&gt;
&lt;p&gt;and set "ksnapshot --region" as "Command/URL" for Action. Here I prefer the default behavior to take screenshot of rectangel area. You can just use "ksnapshot" if you like.
   &lt;img alt="set command" src="/images/ksnapshot2.png" /&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;That's all. Now you can just press "Win + S" and select a rectangle region to take a screenshot.&lt;/p&gt;</summary></entry><entry><title>install Chinese input method on T61 running Debian</title><link href="http://xiaojianfeng.github.io/code/install-chinese-input-method-on-t61-running-debian.html" rel="alternate"></link><updated>2014-08-13T22:39:27+08:00</updated><author><name>Xiao Jianfeng</name></author><id>tag:xiaojianfeng.github.io,2014-08-13:code/install-chinese-input-method-on-t61-running-debian.html</id><summary type="html">&lt;p&gt;Now it is much eaiser to install Chinese input method than before.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;apt-get install task-chinese-s-kde-desktop fcitx-pinyin&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Go to "Settings" --&amp;gt; "System Settings" --&amp;gt; "Local" --&amp;gt; "Input Method" --&amp;gt; "Input Method"
   --&amp;gt; add "Pinyin" from "Available Input Method" to "Current Input Method". &lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Uncheck "Only Show Current Language" if "Pinyin" is not shown in "Available Input Method".&lt;/p&gt;
&lt;p&gt;That's all. You will be able to use "Ctrl + Space" to use Chinese input method.&lt;/p&gt;</summary></entry><entry><title>convert bam file to fastq</title><link href="http://xiaojianfeng.github.io/bioinf/convert-bam-file-to-fastq.html" rel="alternate"></link><updated>2014-08-06T20:16:55+08:00</updated><author><name>Xiao Jianfeng</name></author><id>tag:xiaojianfeng.github.io,2014-08-06:bioinf/convert-bam-file-to-fastq.html</id><summary type="html">&lt;p&gt;After having struggled for a while to find a convenient tool to extract .fastq file to .bam file, I decided to write one.&lt;/p&gt;
&lt;p&gt;The problems with current tools are:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Couldn't deal with reads having multiple match in .bam file.&lt;/li&gt;
&lt;li&gt;Some tools require the .bam to be sorted by name first.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;In my program (https://github.com/XiaoJianfeng/ibl/blob/master/util/bam2fq.sh), Sqlite3 is used to do the heavy job. Below is the details of how to do it:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;"samtools view" read .bam file and output to stdout.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Sqlite3 create a table fastq with 4 columns (qname, flag, seq, qual), and import data from stdout to the table with sqlite3 command ".import".
CREATE TABLE fastq (qname, flag, seq, qual);&lt;/p&gt;
&lt;p&gt;select date()||" "||time()||" import begin";&lt;br /&gt;
.separator "\t"&lt;br /&gt;
.import temp.$$ fastq 
CREATE INDEX qname_idx on fastq (qname);   &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Sqlite3 creat two tables, "left" and "right", and get qname of read_1 and read_2 to these two tables separately. whether a read is the first read or second read is identified by checking the flag. 0x40 is set for first read, while 0x80 is set for second read.&lt;/p&gt;
&lt;p&gt;CREATE TABLE left as select qname from fastq where flag &amp;amp; 64 == 64;&lt;br /&gt;
CREATE TABLE right as select qname from fastq where flag &amp;amp; 128 == 128;  &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;select reads from table "fastq" that are the first in the pair, and has corresponding mate pair in table "right"; and select reads from table "fastq" that are the second in the pair, and has corresponding mate pair in table "left". "\n" is used as separator between columns, and the output is redirected to .fastq file.&lt;/p&gt;
&lt;p&gt;.output ${left_file}&lt;br /&gt;
.separator "\n"&lt;br /&gt;
select distinct "@"||right.qname||"/1", seq, '+', qual from right join fastq on fastq.qname == right.qname where flag&amp;amp;64 == 64 order by right.qname;  &lt;/p&gt;
&lt;p&gt;.output ${right_file}&lt;br /&gt;
.separator "\n"&lt;br /&gt;
select distinct "@"||left.qname||"/2", seq, '+', qual from left join fastq on fastq.qname == left.qname where flag&amp;amp;128 == 128 order by left.qname;  &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;job done.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;With my program, the .bam file doesn't need to be sorted beforehand.&lt;/p&gt;
&lt;p&gt;It has one limition: the output .fastq files are not compressed. I will remove this limition later when I have time. But please rest assured it works perfectly well at the moment.&lt;/p&gt;
&lt;h2&gt;[update 2014-08-11 22:33:09]:&lt;/h2&gt;
&lt;h3&gt;fixed a bug regarding identification of first and second read in a pair by flags&lt;/h3&gt;
&lt;p&gt;the primary alignment should have flag &amp;amp; 0x900 == 0, first read has flag &amp;amp; 0x40 == 0x40, and second read has flag &amp;amp; 0x80 == 0x80&lt;/p&gt;
&lt;p&gt;so primary alignment of first read should be flag &amp;amp; 0x940 (ie. 2368) == 0x40, and for second read flag &amp;amp; 0x980 (ie. 2432) == 0x80&lt;/p&gt;
&lt;p&gt;CREATE TABLE left as select qname from fastq where flag &amp;amp; 2368 == 64; &lt;br /&gt;
   CREATE TABLE right as select qname from fastq where flag &amp;amp; 2432 == 128;       &lt;/p&gt;
&lt;h3&gt;bam2fq.sh is updated to support gziped output.&lt;/h3&gt;
&lt;p&gt;details of the implementation:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;first creat named pipe&lt;/p&gt;
&lt;p&gt;mkfifo tmp_output&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;use gzip to compress the content read from named pipe, and put the process into background&lt;/p&gt;
&lt;p&gt;gzip -c &amp;lt; tmp_output &amp;gt; output.fq.gz &amp;amp;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;in sqlite3, output to to named pipe&lt;/p&gt;
&lt;p&gt;.output tmp_output
[SELECT ...]&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;it is possible to set .output to a pipe from within sqlite3,&lt;/p&gt;
&lt;p&gt;.output '| gzip -c &amp;gt; output.fq.gz'
[SELECT ...]&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;[2014-08-12 21:14:52]&lt;/h2&gt;
&lt;h3&gt;the task is more complicated than I have expected. here is another bug&lt;/h3&gt;
&lt;p&gt;The sequences in .bam file for two reads of a pair are on the same strand. However, for 
paired-end reads, one read is on forward stand, and the other one is on reverse strand.
So one of them should be mapped to another strand (reverse complement).&lt;/p&gt;
&lt;p&gt;In bam2fq.sh, the first reads are extracted from .bam unchanged. The second reads are all converted to reverse complement with command "tr 'ATGC' 'TACG' | rev".&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/XiaoJianfeng/ibl/blob/master/util/bam2fq.sh"&gt;bam2fq.sh&lt;/a&gt; is updated.&lt;/p&gt;</summary></entry><entry><title>create blog on github pages with pelican</title><link href="http://xiaojianfeng.github.io/code/create-blog-on-github-pages-with-pelican.html" rel="alternate"></link><updated>2015-02-23T22:39:54+08:00</updated><author><name>Xiao Jianfeng</name></author><id>tag:xiaojianfeng.github.io,2014-08-05:code/create-blog-on-github-pages-with-pelican.html</id><summary type="html">&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;install pelican, ghp-import, and of course git&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;create a github repo: xiaojianfeng.github.io, and choose to not initalize with a README.md.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;create a directory "technotes", cd into this directory and run "pelican-quickstart"&lt;/p&gt;
&lt;p&gt;$ mkdir technotes &lt;br /&gt;
$ cd technotes &lt;br /&gt;
$ pelican-quickstart &lt;br /&gt;
Welcome to pelican-quickstart v3.5.0.  &lt;/p&gt;
&lt;p&gt;This script will help you create a new Pelican-based website.  &lt;/p&gt;
&lt;p&gt;Please answer the following questions so this script can generate the files&lt;br /&gt;
needed by Pelican.  &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Where do you want to create your new web site? [.] &lt;br /&gt;
What will be the title of this web site? Tech Notes&lt;br /&gt;
Who will be the author of this web site? Xiao Jianfeng&lt;br /&gt;
What will be the default language of this web site? [en] &lt;br /&gt;
Do you want to specify a URL prefix? e.g., http://example.com   (Y/n)   &lt;br /&gt;
What is your URL prefix? (see above example; no trailing slash) http://xiaojianfeng.github.io&lt;br /&gt;
Do you want to enable article pagination? (Y/n) &lt;br /&gt;
How many articles per page do you want? [10] 20&lt;br /&gt;
Do you want to generate a Fabfile/Makefile to automate generation and publishing? (Y/n) &lt;br /&gt;
Do you want an auto-reload &amp;amp; simpleHTTP script to assist with theme and site development? (Y/n) &lt;br /&gt;
Do you want to upload your website using FTP? (y/N) &lt;br /&gt;
Do you want to upload your website using SSH? (y/N) &lt;br /&gt;
Do you want to upload your website using Dropbox? (y/N) &lt;br /&gt;
Do you want to upload your website using S3? (y/N) &lt;br /&gt;
Do you want to upload your website using Rackspace Cloud Files? (y/N) &lt;br /&gt;
Do you want to upload your website using GitHub Pages? (y/N) y&lt;br /&gt;
Is this your personal page (username.github.io)? (y/N) y&lt;br /&gt;
Done. Your new project is available at /path/to/technotes  &lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;initalize git repo in directory on local harddisk&lt;/p&gt;
&lt;p&gt;$ cd technotes&lt;br /&gt;
$ git init&lt;br /&gt;
$ git remote add origin https://github.com:XiaoJianfeng/xiaojianfeng.github.io.git     &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;start to write blog with markdown, and then run "make github"&lt;/p&gt;
&lt;p&gt;$ vim content/first_post.md  # and write something &lt;br /&gt;
$ make github   &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;add the following to ~/.gitconfig, so you will not to be asked to input password everytime, and you can use multiple accounts with multiple repositories.&lt;/p&gt;
&lt;p&gt;[credential]&lt;br /&gt;
    helper = osxkeychain&lt;br /&gt;
    useHttpPath = true  &lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;</summary></entry><entry><title>first post</title><link href="http://xiaojianfeng.github.io/general/first-post.html" rel="alternate"></link><updated>2014-08-05T22:23:19+08:00</updated><author><name>Xiao Jianfeng</name></author><id>tag:xiaojianfeng.github.io,2014-08-05:general/first-post.html</id><summary type="html">&lt;p&gt;Aftering having tried several blog platforms, finally I switched to github.&lt;/p&gt;
&lt;p&gt;This blog will be the host of my tech notes.&lt;/p&gt;</summary></entry></feed>