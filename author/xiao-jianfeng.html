<!DOCTYPE html>
<html lang="en">
<head>

        <title>Tech Notes - Articles by Xiao Jianfeng</title>
        <meta charset="utf-8" />
        <link href="http://xiaojianfeng.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Tech Notes Full Atom Feed" />


        <!-- Mobile viewport optimized: j.mp/bplateviewport -->
        <meta name="viewport" content="width=device-width,initial-scale=1, maximum-scale=1">

        <link rel="stylesheet" type="text/css" href="http://xiaojianfeng.github.io/theme/gumby.css" />
        <link rel="stylesheet" type="text/css" href="http://xiaojianfeng.github.io/theme/style.css" />
        <link rel="stylesheet" type="text/css" href="http://xiaojianfeng.github.io/theme/pygment.css" />

        <script src="http://xiaojianfeng.github.io/theme/js/libs/modernizr-2.6.2.min.js"></script>




</head>

<body id="index" class="home">


    <div class="container">

        <div class="row">

          <header id="banner" class="body">
                  <h1><a href="http://xiaojianfeng.github.io/">Tech Notes <strong></strong></a></h1>
          </header><!-- /#banner -->

            <div id="navigation" class="navbar row">
              <a href="#" gumby-trigger="#navigation &gt; ul" class="toggle"><i class="icon-menu"></i></a>
             
              <ul class="columns">
                <li><a href="http://xiaojianfeng.github.io/">Home</a></li>


              </ul>
            </div>

<section id="content">
<h2>Articles by Xiao Jianfeng</h2>


   <div class="row">


        <div class="eleven columns">
                 <ol id="post-list">
                        <li><article class="hentry">
                                <header> <h2 class="entry-title"><a href="http://xiaojianfeng.github.io/mac/if-you-dont-want-your-hostname-to-be-modifed-by-dhcp.html" rel="bookmark" title="Permalink to if you don't want your hostname to be modifed by DHCP">if you don't want your hostname to be modifed by DHCP</a></h2> </header>
                                <footer class="post-info">
                                    <abbr class="published" title="2015-04-13T23:36:00+08:00"> Mon 13 April 2015 </abbr>
                                    <address class="vcard author">By 
                                    <a class="url fn" href="http://xiaojianfeng.github.io/author/xiao-jianfeng.html"> Xiao Jianfeng</a>
                                    </address>
                                </footer><!-- /.post-info -->
                                <div class="entry-content"> <p>It can be annoying to see my hostname being modifed each time I connect to a different WIFI. It is because the hostname was never set.</p>
<div class="highlight"><pre>&gt; username@bogon[s002] ~&gt; scutil --get HostName 
&gt; HostName: not set
</pre></div>


<p>So we just need to set the hostname:</p>
<div class="highlight"><pre>&gt; username@bogon[s002] ~&gt; sudo scutil --set HostName &quot;new_hostname&quot;  
&gt; Password:  
&gt; username@bogon[s002] ~&gt; scutil --get HostName              
&gt; new_hostname  
&gt; username@bogon[s002] ~&gt;
</pre></div> </div><!-- /.entry-content -->

                                <div class="medium primary btn"><a href="http://xiaojianfeng.github.io/mac/if-you-dont-want-your-hostname-to-be-modifed-by-dhcp.html" rel="bookmark" title="Permalink to if you don't want your hostname to be modifed by DHCP">Read more <i class="icon-arrow-right"></i></a></div>



                                <div class="row tag-row">
                                </div>



                        </article></li>
                        <li><article class="hentry">
                                <header> <h2 class="entry-title"><a href="http://xiaojianfeng.github.io/mac/disable-local-backup-of-timemachine.html" rel="bookmark" title="Permalink to disable local backup of timemachine">disable local backup of timemachine</a></h2> </header>
                                <footer class="post-info">
                                    <abbr class="published" title="2015-04-11T11:55:00+08:00"> Sat 11 April 2015 </abbr>
                                    <address class="vcard author">By 
                                    <a class="url fn" href="http://xiaojianfeng.github.io/author/xiao-jianfeng.html"> Xiao Jianfeng</a>
                                    </address>
                                </footer><!-- /.post-info -->
                                <div class="entry-content"> <ul>
<li>
<p>Finder -&gt; goto "/Volumes" will see a backup disk</p>
</li>
<li>
<p>"sudo tmutil disablelocal" will disable local cache of time machine</p>
</li>
<li>
<p>"sudo tmutil enablelocal" will enable it again</p>
</li>
</ul> </div><!-- /.entry-content -->

                                <div class="medium primary btn"><a href="http://xiaojianfeng.github.io/mac/disable-local-backup-of-timemachine.html" rel="bookmark" title="Permalink to disable local backup of timemachine">Read more <i class="icon-arrow-right"></i></a></div>



                                <div class="row tag-row">
                                </div>



                        </article></li>
                        <li><article class="hentry">
                                <header> <h2 class="entry-title"><a href="http://xiaojianfeng.github.io/code/how-to-re-attach-a-lftp-process.html" rel="bookmark" title="Permalink to how to re-attach a lftp process">how to re-attach a lftp process</a></h2> </header>
                                <footer class="post-info">
                                    <abbr class="published" title="2015-04-05T17:00:00+08:00"> Sun 05 April 2015 </abbr>
                                    <address class="vcard author">By 
                                    <a class="url fn" href="http://xiaojianfeng.github.io/author/xiao-jianfeng.html"> Xiao Jianfeng</a>
                                    </address>
                                </footer><!-- /.post-info -->
                                <div class="entry-content"> <p>lftp很好的一个功能是退出之后，正在运行的任务会自动提交到后台继续运行。</p>
<p>但是有时候想重新连接这些任务，lftp提供了一个很好的命令attach。首先用ps查到要连接的任务的pid;
然后打开lftp，运行“attach The_PID”。搞定。</p> </div><!-- /.entry-content -->

                                <div class="medium primary btn"><a href="http://xiaojianfeng.github.io/code/how-to-re-attach-a-lftp-process.html" rel="bookmark" title="Permalink to how to re-attach a lftp process">Read more <i class="icon-arrow-right"></i></a></div>



                                <div class="row tag-row">
                                </div>



                        </article></li>
                        <li><article class="hentry">
                                <header> <h2 class="entry-title"><a href="http://xiaojianfeng.github.io/code/run-job-with-at-on-mac.html" rel="bookmark" title="Permalink to run job with at on Mac">run job with at on Mac</a></h2> </header>
                                <footer class="post-info">
                                    <abbr class="published" title="2015-04-01T11:16:00+08:00"> Wed 01 April 2015 </abbr>
                                    <address class="vcard author">By 
                                    <a class="url fn" href="http://xiaojianfeng.github.io/author/xiao-jianfeng.html"> Xiao Jianfeng</a>
                                    </address>
                                </footer><!-- /.post-info -->
                                <div class="entry-content"> <p>"at" on Mac is run by atrun, which is invoked by launchd. The problem is atrun is not running by default.</p>
<div class="highlight"><pre><span class="n">The</span> <span class="n">atrun</span> <span class="n">utility</span> <span class="n">runs</span> <span class="n">commands</span> <span class="n">queued</span> <span class="n">by</span> <span class="n">at</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span>  <span class="n">It</span> <span class="n">is</span> <span class="n">invoked</span> <span class="n">periodically</span> <span class="n">by</span> <span class="n">launchd</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span> <span class="n">as</span> <span class="n">specified</span> <span class="n">in</span> <span class="n">the</span> <span class="n">com</span><span class="p">.</span><span class="n">apple</span><span class="p">.</span><span class="n">atrun</span><span class="p">.</span><span class="n">plist</span> <span class="n">property</span> <span class="n">list</span><span class="p">.</span>  <span class="n">By</span> <span class="k">default</span> <span class="n">the</span> <span class="n">property</span> <span class="n">list</span> <span class="n">contains</span> <span class="n">the</span> <span class="n">Disabled</span> <span class="n">key</span> <span class="n">set</span> <span class="n">to</span> <span class="nb">true</span><span class="p">,</span> <span class="n">so</span> <span class="n">atrun</span> <span class="n">is</span> <span class="n">never</span> <span class="n">invoked</span><span class="p">.</span>

<span class="n">Execute</span> <span class="n">the</span> <span class="n">following</span> <span class="n">command</span> <span class="n">as</span> <span class="n">root</span> <span class="n">to</span> <span class="n">enable</span> <span class="n">atrun</span><span class="o">:</span>  
    <span class="n">launchctl</span> <span class="n">load</span> <span class="o">-</span><span class="n">w</span> <span class="o">/</span><span class="n">System</span><span class="o">/</span><span class="n">Library</span><span class="o">/</span><span class="n">LaunchDaemons</span><span class="o">/</span><span class="n">com</span><span class="p">.</span><span class="n">apple</span><span class="p">.</span><span class="n">atrun</span><span class="p">.</span><span class="n">plist</span>
</pre></div>


<p>After that, you can use "at" to submit job on Mac.</p> </div><!-- /.entry-content -->

                                <div class="medium primary btn"><a href="http://xiaojianfeng.github.io/code/run-job-with-at-on-mac.html" rel="bookmark" title="Permalink to run job with at on Mac">Read more <i class="icon-arrow-right"></i></a></div>



                                <div class="row tag-row">
                                </div>



                        </article></li>
                        <li><article class="hentry">
                                <header> <h2 class="entry-title"><a href="http://xiaojianfeng.github.io/code/install-docker-on-mac-os-x-1010.html" rel="bookmark" title="Permalink to install docker on Mac OS X 10.10">install docker on Mac OS X 10.10</a></h2> </header>
                                <footer class="post-info">
                                    <abbr class="published" title="2015-03-25T13:46:00+08:00"> Wed 25 March 2015 </abbr>
                                    <address class="vcard author">By 
                                    <a class="url fn" href="http://xiaojianfeng.github.io/author/xiao-jianfeng.html"> Xiao Jianfeng</a>
                                    </address>
                                </footer><!-- /.post-info -->
                                <div class="entry-content"> <ol>
<li>
<p>install boot2docker </p>
<p>Go to https://github.com/boot2docker/osx-installer/releases, and download boot2docker v1.5.0.</p>
<p>The docker and boot2docker binaries are in /usr/local/bin which you can access from your terminal. </p>
</li>
<li>
<p>launch boot2docker.app, which will open a terminal window. And run "docker run hello-world" to check if the installation succeeds or not.</p>
</li>
<li>
<p>You can upgrade your existing Boot2Docker VM without data loss by running:  boot2docker upgrade</p>
</li>
<li>
<p>Create a new Boot2Docker VM.</p>
<p>boot2docker init</p>
<p>This will create a new virtual machine on "~/VirtualBox VMs/boot2docker-vm". You only need to run this command once.</p>
</li>
<li>
<p>start boot2docker VM.</p>
<p>boot2docker start</p>
</li>
<li>
<p>display the environment variables for docker</p>
<blockquote>
<p>boot2docker shellinit
Writing /Users/username/.boot2docker/certs/boot2docker-vm/ca.pem  <br />
Writing /Users/username/.boot2docker/certs/boot2docker-vm/cert.pem  <br />
Writing /Users/username/.boot2docker/certs/boot2docker-vm/key.pem  <br />
    export DOCKER_CERT_PATH=/Users/username/.boot2docker/certs/boot2docker-vm  <br />
    export DOCKER_TLS_VERIFY=1  <br />
    export DOCKER_HOST=tcp://192.168.59.103:2376    </p>
</blockquote>
</li>
<li>
<p>if "env | grep docker" doesn't show 3 settings, you should set variables for docker.</p>
<blockquote>
<p>$(boot2docker shellinit)</p>
</blockquote>
</li>
<li>
<p>start to work with docker.</p>
</li>
<li>
<p>close the boot2docker image.</p>
<blockquote>
<p>boot2docker stop</p>
</blockquote>
</li>
</ol> </div><!-- /.entry-content -->

                                <div class="medium primary btn"><a href="http://xiaojianfeng.github.io/code/install-docker-on-mac-os-x-1010.html" rel="bookmark" title="Permalink to install docker on Mac OS X 10.10">Read more <i class="icon-arrow-right"></i></a></div>



                                <div class="row tag-row">
                                </div>



                        </article></li>
                        <li><article class="hentry">
                                <header> <h2 class="entry-title"><a href="http://xiaojianfeng.github.io/utils/export-mail-in-ost-file-to-mailapp-on-mac.html" rel="bookmark" title="Permalink to export mail in .ost file to mail.app on Mac">export mail in .ost file to mail.app on Mac</a></h2> </header>
                                <footer class="post-info">
                                    <abbr class="published" title="2015-03-24T14:10:00+08:00"> Tue 24 March 2015 </abbr>
                                    <address class="vcard author">By 
                                    <a class="url fn" href="http://xiaojianfeng.github.io/author/xiao-jianfeng.html"> Xiao Jianfeng</a>
                                    </address>
                                </footer><!-- /.post-info -->
                                <div class="entry-content"> <ol>
<li>
<p>export mail in .ost file to mbox file (the file may not end with .mbox).  </p>
<p>readpst -j 3 outlook.ost </p>
</li>
<li>
<p>mail.app --&gt; File --&gt; import mailboxes, and select the folder generated in step 1.</p>
</li>
</ol>
<p>That's all. Your emails in the ost file will be imported into a directory under "on my Mac".</p> </div><!-- /.entry-content -->

                                <div class="medium primary btn"><a href="http://xiaojianfeng.github.io/utils/export-mail-in-ost-file-to-mailapp-on-mac.html" rel="bookmark" title="Permalink to export mail in .ost file to mail.app on Mac">Read more <i class="icon-arrow-right"></i></a></div>



                                <div class="row tag-row">
                                </div>



                        </article></li>
                        <li><article class="hentry">
                                <header> <h2 class="entry-title"><a href="http://xiaojianfeng.github.io/bioinf/common-mistakes-in-bioinformatics.html" rel="bookmark" title="Permalink to common mistakes in bioinformatics">common mistakes in bioinformatics</a></h2> </header>
                                <footer class="post-info">
                                    <abbr class="published" title="2015-03-14T16:03:00+08:00"> Sat 14 March 2015 </abbr>
                                    <address class="vcard author">By 
                                    <a class="url fn" href="http://xiaojianfeng.github.io/author/xiao-jianfeng.html"> Xiao Jianfeng</a>
                                    </address>
                                </footer><!-- /.post-info -->
                                <div class="entry-content"> <p>This nice thread(https://www.biostars.org/p/7126/) summarized a lot of common mistakes people (including me, of course) might make in daily work.</p>
<div class="highlight"><pre><span class="o">*</span> <span class="n">forget</span> <span class="n">to</span> <span class="n">check</span> <span class="n">both</span> <span class="n">strands</span>
<span class="o">*</span> <span class="n">generate</span> <span class="n">random</span> <span class="n">genomic</span> <span class="n">sites</span> <span class="n">without</span> <span class="n">avoiding</span> <span class="n">masked</span> <span class="p">(</span><span class="n">NNN</span><span class="p">)</span> <span class="n">gaps</span>
<span class="o">*</span> <span class="n">confuse</span> <span class="n">genome</span> <span class="n">freezes</span> <span class="n">and</span> <span class="n">even</span> <span class="n">species</span>
<span class="o">*</span> <span class="n">a</span> <span class="n">lot</span> <span class="n">of</span> <span class="n">off</span><span class="o">-</span><span class="n">by</span><span class="o">-</span><span class="n">one</span> <span class="n">errors</span> <span class="n">due</span> <span class="n">to</span> <span class="n">switching</span> <span class="n">between</span> <span class="n">formats</span><span class="o">:</span> <span class="n">Bed</span> <span class="n">is</span> <span class="mi">0</span> <span class="n">based</span><span class="p">;</span>  <span class="n">GFF</span><span class="o">/</span><span class="n">GTF</span> <span class="n">are</span> <span class="mi">1</span><span class="o">-</span><span class="n">based</span>  
<span class="o">*</span> <span class="n">Trusting</span> <span class="n">that</span> <span class="n">a</span> <span class="n">downloaded</span> <span class="n">file</span> <span class="n">is</span> <span class="n">actually</span> <span class="n">fully</span> <span class="n">downloaded</span>
<span class="o">*</span> <span class="n">Trusting</span> <span class="n">that</span> <span class="n">an</span> <span class="n">aligner</span> <span class="n">will</span> <span class="n">accept</span> <span class="n">a</span> <span class="n">list</span> <span class="n">of</span> <span class="n">query</span> <span class="n">files</span> <span class="n">instead</span> <span class="n">of</span> <span class="n">just</span> <span class="n">taking</span> <span class="n">the</span> <span class="n">first</span> <span class="n">and</span> <span class="n">ignoring</span> <span class="n">the</span> <span class="n">rest</span> <span class="p">(</span><span class="n">quiz</span><span class="o">:</span> <span class="n">which</span> <span class="n">ones</span> <span class="n">am</span> <span class="n">i</span> <span class="n">talking</span> <span class="n">about</span><span class="o">?</span><span class="p">)</span>
<span class="o">*</span> <span class="n">Assuming</span> <span class="n">that</span> <span class="n">the</span> <span class="n">quality</span> <span class="n">scores</span> <span class="n">in</span> <span class="n">a</span> <span class="n">FASTQ</span> <span class="n">file</span> <span class="n">are</span> <span class="n">from</span> <span class="n">a</span> <span class="n">great</span> <span class="n">Sanger</span><span class="o">-</span><span class="n">encoded</span> <span class="n">run</span> <span class="n">instead</span> <span class="n">of</span> <span class="n">a</span> <span class="n">very</span> <span class="n">poor</span> <span class="n">Illumina</span><span class="o">-</span><span class="mf">1.3</span> <span class="n">run</span>
<span class="o">*</span> <span class="n">Assuming</span> <span class="n">chr1</span> <span class="n">is</span> <span class="n">followed</span> <span class="n">by</span> <span class="n">chr2</span> <span class="n">not</span> <span class="n">chr10</span>
<span class="o">*</span> <span class="n">off</span><span class="o">-</span><span class="n">by</span><span class="o">-</span><span class="n">one</span> <span class="n">errors</span>
<span class="o">*</span> <span class="n">regex</span> <span class="n">errors</span>
<span class="o">*</span> <span class="n">parsing</span> <span class="n">a</span> <span class="n">complex</span> <span class="n">alignment</span><span class="o">/</span><span class="n">file</span> <span class="n">format</span> <span class="n">incorrectly</span> <span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">g</span><span class="p">.</span> <span class="n">BLAST</span> <span class="n">or</span> <span class="n">GenBank</span><span class="p">,</span> <span class="n">probably</span> <span class="n">the</span> <span class="n">original</span> <span class="n">rationale</span> <span class="k">for</span> <span class="n">developing</span> <span class="n">BioPerl</span><span class="p">)</span>
<span class="o">*</span> <span class="n">failing</span> <span class="n">to</span> <span class="n">account</span> <span class="k">for</span> <span class="n">strand</span>
<span class="o">*</span> <span class="n">failing</span> <span class="n">to</span> <span class="n">revcomp</span> <span class="n">sequences</span>
<span class="o">*</span> <span class="n">failing</span> <span class="n">to</span> <span class="n">account</span> <span class="k">for</span> <span class="n">the</span> <span class="n">last</span> <span class="n">element</span> <span class="n">in</span> <span class="n">a</span> <span class="n">file</span> <span class="p">(</span><span class="n">because</span> <span class="n">of</span> <span class="n">a</span> <span class="n">improper</span> <span class="n">loop</span> <span class="n">condition</span> <span class="n">or</span> <span class="n">no</span> <span class="n">EOL</span> <span class="n">character</span> <span class="n">on</span> <span class="n">last</span> <span class="n">line</span><span class="p">)</span>
<span class="o">*</span> <span class="n">failing</span> <span class="n">to</span> <span class="n">account</span> <span class="k">for</span> <span class="n">OS</span> <span class="n">dependent</span> <span class="n">line</span> <span class="n">breaks</span>
<span class="o">*</span> <span class="n">using</span> <span class="n">the</span> <span class="n">wrong</span> <span class="n">assembly</span><span class="o">/</span><span class="n">annotation</span><span class="o">/</span><span class="n">release</span>
<span class="o">*</span> <span class="n">using</span> <span class="n">the</span> <span class="n">wrong</span> <span class="n">genome</span> <span class="n">coordinate</span> <span class="n">system</span>
<span class="o">*</span> <span class="n">using</span> <span class="n">the</span> <span class="n">wrong</span> <span class="n">file</span> <span class="p">(</span><span class="n">multiple</span> <span class="n">versions</span><span class="p">,</span> <span class="n">version</span> <span class="n">skew</span><span class="p">)</span>
<span class="o">*</span> <span class="n">failing</span> <span class="n">to</span> <span class="n">account</span> <span class="k">for</span> <span class="n">nested</span><span class="o">/</span><span class="n">intercalated</span> <span class="n">annotation</span> <span class="n">features</span> <span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">g</span><span class="p">.</span> <span class="n">genes</span><span class="p">)</span>
<span class="o">*</span> <span class="n">assuming</span> <span class="n">all</span> <span class="n">jobs</span> <span class="n">have</span> <span class="n">completed</span> <span class="n">on</span> <span class="n">a</span> <span class="n">cluster</span>
<span class="o">*</span> <span class="n">deleting</span> <span class="n">files</span>
<span class="o">*</span> <span class="n">not</span> <span class="n">randomizing</span> <span class="n">your</span> <span class="n">data</span> <span class="n">properly</span>
<span class="o">*</span> <span class="n">improper</span> <span class="n">use</span> <span class="n">of</span> <span class="n">statistical</span> <span class="n">tests</span>
<span class="o">*</span> <span class="n">not</span> <span class="n">documenting</span> <span class="n">methods</span> <span class="n">fully</span> <span class="p">(</span><span class="n">to</span> <span class="n">check</span> <span class="n">and</span> <span class="n">correct</span> <span class="n">all</span> <span class="n">of</span> <span class="n">the</span> <span class="n">above</span><span class="p">)</span>
<span class="o">*</span> <span class="n">Run</span> <span class="n">a</span> <span class="n">batch</span> <span class="n">BLAST</span> <span class="n">job</span> <span class="n">and</span> <span class="n">forgetting</span> <span class="n">to</span> <span class="n">put</span> <span class="n">the</span> <span class="s">&quot;-o something.out&quot;</span> <span class="n">option</span><span class="p">.</span> <span class="n">Then</span> <span class="n">switching</span> <span class="n">off</span> <span class="n">the</span> <span class="n">monitor</span> <span class="n">and</span> <span class="n">coming</span> <span class="n">the</span> <span class="n">next</span> <span class="n">day</span> <span class="n">to</span> <span class="n">see</span> <span class="n">a</span> <span class="n">bunch</span> <span class="n">of</span> <span class="n">characters</span> <span class="n">in</span> <span class="n">my</span> <span class="n">terminal</span>
<span class="o">*</span> <span class="s">&quot;tar -zxvf&quot;</span> <span class="n">without</span> <span class="n">checking</span> <span class="n">the</span> <span class="n">tar</span> <span class="n">file</span> <span class="n">before</span><span class="p">,</span> <span class="n">I</span> <span class="n">have</span> <span class="n">decompressed</span> <span class="n">thousands</span> <span class="n">of</span> <span class="n">files</span> <span class="n">in</span> <span class="n">my</span> <span class="n">current</span> <span class="n">directory</span> <span class="n">assuming</span> <span class="n">they</span> <span class="n">came</span> <span class="n">in</span> <span class="n">their</span> <span class="n">own</span> <span class="n">folder</span><span class="p">.</span>
</pre></div>


<p>Another very important one is: gene name might be hacked by MS Excel. </p>
<p>There are 11 human gene names in March: MARCH1 to MARCH11, and one in December: DEC1. And excel will treat them as date!</p>
<p>So make sure to ask excel to open data as text when working with gene names.</p>
<p>Please refer to this paper for more info.</p>
<p>1.Zeeberg, B. R. et al. Mistaken Identifiers: Gene name errors can be introduced inadvertently when using Excel in bioinformatics. BMC Bioinformatics 5, 80 (2004).  http://www.biomedcentral.com/1471-2105/5/80</p> </div><!-- /.entry-content -->

                                <div class="medium primary btn"><a href="http://xiaojianfeng.github.io/bioinf/common-mistakes-in-bioinformatics.html" rel="bookmark" title="Permalink to common mistakes in bioinformatics">Read more <i class="icon-arrow-right"></i></a></div>



                                <div class="row tag-row">
                                </div>



                        </article></li>
                        <li><article class="hentry">
                                <header> <h2 class="entry-title"><a href="http://xiaojianfeng.github.io/general/finally-i-moved-to-mac.html" rel="bookmark" title="Permalink to finally I moved to Mac">finally I moved to Mac</a></h2> </header>
                                <footer class="post-info">
                                    <abbr class="published" title="2015-01-20T16:09:27+08:00"> Tue 20 January 2015 </abbr>
                                    <address class="vcard author">By 
                                    <a class="url fn" href="http://xiaojianfeng.github.io/author/xiao-jianfeng.html"> Xiao Jianfeng</a>
                                    </address>
                                </footer><!-- /.post-info -->
                                <div class="entry-content"> <p>2014年年底，用了七年多的在最后一年从Windows转向Linux的T61因为nvidia显卡门报废，决定换成Mac了。</p>
<p>理由很简单，我用电脑主要用来办公和编程。Windows因为有MS Office，办公不错，但是编程(包括数据处理)方面太差；Linux在编程方面很好，但是办公方面就是渣:只有Mac可以兼顾二者。</p> </div><!-- /.entry-content -->

                                <div class="medium primary btn"><a href="http://xiaojianfeng.github.io/general/finally-i-moved-to-mac.html" rel="bookmark" title="Permalink to finally I moved to Mac">Read more <i class="icon-arrow-right"></i></a></div>



                                <div class="row tag-row">
                                </div>



                        </article></li>
                        <li><article class="hentry">
                                <header> <h2 class="entry-title"><a href="http://xiaojianfeng.github.io/code/create-shortcurt-key-for-ksnapshot.html" rel="bookmark" title="Permalink to create shortcurt key for ksnapshot">create shortcurt key for ksnapshot</a></h2> </header>
                                <footer class="post-info">
                                    <abbr class="published" title="2014-08-14T23:27:51+08:00"> Thu 14 August 2014 </abbr>
                                    <address class="vcard author">By 
                                    <a class="url fn" href="http://xiaojianfeng.github.io/author/xiao-jianfeng.html"> Xiao Jianfeng</a>
                                    </address>
                                </footer><!-- /.post-info -->
                                <div class="entry-content"> <p>ksnapshot is a powerful tool to take snapshot. However, each time you have to start ksnapshot from the application menu, which is not as efficient as it should be.</p>
<p>Here is how to create shortcut key for ksnapshot.</p>
<ul>
<li>
<p>go to "System Settings" --&gt; "Shortcuts and Gestures" --&gt; "Custom Shortcuts"
   --&gt; "Preset Actions" --&gt; "PrintScreen"</p>
<p>set "Meta + S" (Win + S), which is the same as screen clipping shortcut for onenote on Windows, for Trigger;
   <img alt="set shotcut key" src="/images/ksnapshot1.png" /></p>
<p>and set "ksnapshot --region" as "Command/URL" for Action. Here I prefer the default behavior to take screenshot of rectangel area. You can just use "ksnapshot" if you like.
   <img alt="set command" src="/images/ksnapshot2.png" /></p>
</li>
</ul>
<p>That's all. Now you can just press "Win + S" and select a rectangle region to take a screenshot.</p> </div><!-- /.entry-content -->

                                <div class="medium primary btn"><a href="http://xiaojianfeng.github.io/code/create-shortcurt-key-for-ksnapshot.html" rel="bookmark" title="Permalink to create shortcurt key for ksnapshot">Read more <i class="icon-arrow-right"></i></a></div>



                                <div class="row tag-row">
                                </div>



                        </article></li>
                        <li><article class="hentry">
                                <header> <h2 class="entry-title"><a href="http://xiaojianfeng.github.io/code/install-chinese-input-method-on-t61-running-debian.html" rel="bookmark" title="Permalink to install Chinese input method on T61 running Debian">install Chinese input method on T61 running Debian</a></h2> </header>
                                <footer class="post-info">
                                    <abbr class="published" title="2014-08-13T22:39:27+08:00"> Wed 13 August 2014 </abbr>
                                    <address class="vcard author">By 
                                    <a class="url fn" href="http://xiaojianfeng.github.io/author/xiao-jianfeng.html"> Xiao Jianfeng</a>
                                    </address>
                                </footer><!-- /.post-info -->
                                <div class="entry-content"> <p>Now it is much eaiser to install Chinese input method than before.</p>
<ol>
<li>
<p>apt-get install task-chinese-s-kde-desktop fcitx-pinyin</p>
</li>
<li>
<p>Go to "Settings" --&gt; "System Settings" --&gt; "Local" --&gt; "Input Method" --&gt; "Input Method"
   --&gt; add "Pinyin" from "Available Input Method" to "Current Input Method". </p>
</li>
</ol>
<p>Uncheck "Only Show Current Language" if "Pinyin" is not shown in "Available Input Method".</p>
<p>That's all. You will be able to use "Ctrl + Space" to use Chinese input method.</p> </div><!-- /.entry-content -->

                                <div class="medium primary btn"><a href="http://xiaojianfeng.github.io/code/install-chinese-input-method-on-t61-running-debian.html" rel="bookmark" title="Permalink to install Chinese input method on T61 running Debian">Read more <i class="icon-arrow-right"></i></a></div>



                                <div class="row tag-row">
                                </div>



                        </article></li>
                        <li><article class="hentry">
                                <header> <h2 class="entry-title"><a href="http://xiaojianfeng.github.io/bioinf/convert-bam-file-to-fastq.html" rel="bookmark" title="Permalink to convert bam file to fastq">convert bam file to fastq</a></h2> </header>
                                <footer class="post-info">
                                    <abbr class="published" title="2014-08-06T20:16:55+08:00"> Wed 06 August 2014 </abbr>
                                    <address class="vcard author">By 
                                    <a class="url fn" href="http://xiaojianfeng.github.io/author/xiao-jianfeng.html"> Xiao Jianfeng</a>
                                    </address>
                                </footer><!-- /.post-info -->
                                <div class="entry-content"> <p>After having struggled for a while to find a convenient tool to extract .fastq file to .bam file, I decided to write one.</p>
<p>The problems with current tools are:</p>
<ul>
<li>Couldn't deal with reads having multiple match in .bam file.</li>
<li>Some tools require the .bam to be sorted by name first.</li>
</ul>
<p>In my program (https://github.com/XiaoJianfeng/ibl/blob/master/util/bam2fq.sh), Sqlite3 is used to do the heavy job. Below is the details of how to do it:</p>
<ol>
<li>
<p>"samtools view" read .bam file and output to stdout.</p>
</li>
<li>
<p>Sqlite3 create a table fastq with 4 columns (qname, flag, seq, qual), and import data from stdout to the table with sqlite3 command ".import".
CREATE TABLE fastq (qname, flag, seq, qual);</p>
<p>select date()||" "||time()||" import begin";<br />
.separator "\t"<br />
.import temp.$$ fastq 
CREATE INDEX qname_idx on fastq (qname);   </p>
</li>
<li>
<p>Sqlite3 creat two tables, "left" and "right", and get qname of read_1 and read_2 to these two tables separately. whether a read is the first read or second read is identified by checking the flag. 0x40 is set for first read, while 0x80 is set for second read.</p>
<p>CREATE TABLE left as select qname from fastq where flag &amp; 64 == 64;<br />
CREATE TABLE right as select qname from fastq where flag &amp; 128 == 128;  </p>
</li>
<li>
<p>select reads from table "fastq" that are the first in the pair, and has corresponding mate pair in table "right"; and select reads from table "fastq" that are the second in the pair, and has corresponding mate pair in table "left". "\n" is used as separator between columns, and the output is redirected to .fastq file.</p>
<p>.output ${left_file}<br />
.separator "\n"<br />
select distinct "@"||right.qname||"/1", seq, '+', qual from right join fastq on fastq.qname == right.qname where flag&amp;64 == 64 order by right.qname;  </p>
<p>.output ${right_file}<br />
.separator "\n"<br />
select distinct "@"||left.qname||"/2", seq, '+', qual from left join fastq on fastq.qname == left.qname where flag&amp;128 == 128 order by left.qname;  </p>
</li>
<li>
<p>job done.</p>
</li>
</ol>
<p>With my program, the .bam file doesn't need to be sorted beforehand.</p>
<p>It has one limition: the output .fastq files are not compressed. I will remove this limition later when I have time. But please rest assured it works perfectly well at the moment.</p>
<h2>[update 2014-08-11 22:33:09]:</h2>
<h3>fixed a bug regarding identification of first and second read in a pair by flags</h3>
<p>the primary alignment should have flag &amp; 0x900 == 0, first read has flag &amp; 0x40 == 0x40, and second read has flag &amp; 0x80 == 0x80</p>
<p>so primary alignment of first read should be flag &amp; 0x940 (ie. 2368) == 0x40, and for second read flag &amp; 0x980 (ie. 2432) == 0x80</p>
<p>CREATE TABLE left as select qname from fastq where flag &amp; 2368 == 64; <br />
   CREATE TABLE right as select qname from fastq where flag &amp; 2432 == 128;       </p>
<h3>bam2fq.sh is updated to support gziped output.</h3>
<p>details of the implementation:</p>
<ul>
<li>
<p>first creat named pipe</p>
<p>mkfifo tmp_output</p>
</li>
<li>
<p>use gzip to compress the content read from named pipe, and put the process into background</p>
<p>gzip -c &lt; tmp_output &gt; output.fq.gz &amp;</p>
</li>
<li>
<p>in sqlite3, output to to named pipe</p>
<p>.output tmp_output
[SELECT ...]</p>
</li>
<li>
<p>it is possible to set .output to a pipe from within sqlite3,</p>
<p>.output '| gzip -c &gt; output.fq.gz'
[SELECT ...]</p>
</li>
</ul>
<h2>[2014-08-12 21:14:52]</h2>
<h3>the task is more complicated than I have expected. here is another bug</h3>
<p>The sequences in .bam file for two reads of a pair are on the same strand. However, for 
paired-end reads, one read is on forward stand, and the other one is on reverse strand.
So one of them should be mapped to another strand (reverse complement).</p>
<p>In bam2fq.sh, the first reads are extracted from .bam unchanged. The second reads are all converted to reverse complement with command "tr 'ATGC' 'TACG' | rev".</p>
<p><a href="https://github.com/XiaoJianfeng/ibl/blob/master/util/bam2fq.sh">bam2fq.sh</a> is updated.</p> </div><!-- /.entry-content -->

                                <div class="medium primary btn"><a href="http://xiaojianfeng.github.io/bioinf/convert-bam-file-to-fastq.html" rel="bookmark" title="Permalink to convert bam file to fastq">Read more <i class="icon-arrow-right"></i></a></div>



                                <div class="row tag-row">
                                </div>



                        </article></li>
                        <li><article class="hentry">
                                <header> <h2 class="entry-title"><a href="http://xiaojianfeng.github.io/code/create-blog-on-github-pages-with-pelican.html" rel="bookmark" title="Permalink to create blog on github pages with pelican">create blog on github pages with pelican</a></h2> </header>
                                <footer class="post-info">
                                    <abbr class="published" title="2014-08-05T23:40:15+08:00"> Tue 05 August 2014 </abbr>
                                    <address class="vcard author">By 
                                    <a class="url fn" href="http://xiaojianfeng.github.io/author/xiao-jianfeng.html"> Xiao Jianfeng</a>
                                    </address>
                                </footer><!-- /.post-info -->
                                <div class="entry-content"> <ol>
<li>
<p>install pelican, ghp-import, and of course git</p>
</li>
<li>
<p>create a github repo: xiaojianfeng.github.io, and choose to not initalize with a README.md.</p>
</li>
<li>
<p>create a directory "technotes", cd into this directory and run "pelican-quickstart"</p>
<p>$ mkdir technotes <br />
$ cd technotes <br />
$ pelican-quickstart <br />
Welcome to pelican-quickstart v3.5.0.  </p>
<p>This script will help you create a new Pelican-based website.  </p>
<p>Please answer the following questions so this script can generate the files<br />
needed by Pelican.  </p>
<blockquote>
<p>Where do you want to create your new web site? [.] <br />
What will be the title of this web site? Tech Notes<br />
Who will be the author of this web site? Xiao Jianfeng<br />
What will be the default language of this web site? [en] <br />
Do you want to specify a URL prefix? e.g., http://example.com   (Y/n)   <br />
What is your URL prefix? (see above example; no trailing slash) http://xiaojianfeng.github.io<br />
Do you want to enable article pagination? (Y/n) <br />
How many articles per page do you want? [10] 20<br />
Do you want to generate a Fabfile/Makefile to automate generation and publishing? (Y/n) <br />
Do you want an auto-reload &amp; simpleHTTP script to assist with theme and site development? (Y/n) <br />
Do you want to upload your website using FTP? (y/N) <br />
Do you want to upload your website using SSH? (y/N) <br />
Do you want to upload your website using Dropbox? (y/N) <br />
Do you want to upload your website using S3? (y/N) <br />
Do you want to upload your website using Rackspace Cloud Files? (y/N) <br />
Do you want to upload your website using GitHub Pages? (y/N) y<br />
Is this your personal page (username.github.io)? (y/N) y<br />
Done. Your new project is available at /path/to/technotes  </p>
</blockquote>
</li>
<li>
<p>initalize git repo in directory on local harddisk</p>
<p>$ cd technotes<br />
$ git init<br />
$ git remote add origin https://github.com:XiaoJianfeng/xiaojianfeng.github.io.git     </p>
</li>
<li>
<p>start to write blog with markdown, and then run "make github"</p>
<p>$ vim content/first_post.md  # and write something <br />
$ make github   </p>
</li>
<li>
<p>add the following to ~/.gitconfig, so you will not to be asked to input password everytime, and you can use multiple accounts with multiple repositories.</p>
<p>[credential]<br />
    helper = osxkeychain<br />
    useHttpPath = true  </p>
</li>
</ol> </div><!-- /.entry-content -->

                                <div class="medium primary btn"><a href="http://xiaojianfeng.github.io/code/create-blog-on-github-pages-with-pelican.html" rel="bookmark" title="Permalink to create blog on github pages with pelican">Read more <i class="icon-arrow-right"></i></a></div>



                                <div class="row tag-row">
                                </div>



                        </article></li>
                        <li><article class="hentry">
                                <header> <h2 class="entry-title"><a href="http://xiaojianfeng.github.io/general/first-post.html" rel="bookmark" title="Permalink to first post">first post</a></h2> </header>
                                <footer class="post-info">
                                    <abbr class="published" title="2014-08-05T22:23:19+08:00"> Tue 05 August 2014 </abbr>
                                    <address class="vcard author">By 
                                    <a class="url fn" href="http://xiaojianfeng.github.io/author/xiao-jianfeng.html"> Xiao Jianfeng</a>
                                    </address>
                                </footer><!-- /.post-info -->
                                <div class="entry-content"> <p>Aftering having tried several blog platforms, finally I switched to github.</p>
<p>This blog will be the host of my tech notes.</p> </div><!-- /.entry-content -->

                                <div class="medium primary btn"><a href="http://xiaojianfeng.github.io/general/first-post.html" rel="bookmark" title="Permalink to first post">Read more <i class="icon-arrow-right"></i></a></div>



                                <div class="row tag-row">
                                </div>



                        </article></li>
                </ol><!-- /#posts-list -->

        </div><!-- /.eleven.columns -->
        
<div class="three columns">

<h4>Pages</h4>

 <ul>
  </ul>

<h4>Categories</h4>
<ul>
		<li><a href="http://xiaojianfeng.github.io/bioinf/index.html">bioinf</a></li>
		<li><a href="http://xiaojianfeng.github.io/code/index.html">code</a></li>
		<li><a href="http://xiaojianfeng.github.io/category/general.html">general</a></li>
		<li><a href="http://xiaojianfeng.github.io/mac/index.html">mac</a></li>
		<li><a href="http://xiaojianfeng.github.io/utils/index.html">utils</a></li>
</ul>


<h4>Tags</h4>


<nav class="widget">
  <h4>Social</h4>
  <ul>
    <li><a href="https://github.com/xiaojianfeng">github</a></li>
    <li><a href="#">Another social link</a></li>
  </ul>
</nav>

</div> </div><!-- /.row -->

<p class="paginator">
    Page 1 / 1
</p>
</section><!-- /#content -->

       </div><!-- /.row -->
    </div><!-- /.container -->


       <div class="container.nopad bg">

    
        <footer id="credits" class="row">
          <div class="seven columns left-center">

                   <address id="about" class="vcard body">
                    Proudly powered by <a href="http://getpelican.com/">Pelican</a>,
                    which takes great advantage of <a href="http://python.org">Python</a>.
                    <br />
                    Based on the <a target="_blank" href="http://gumbyframework.com">Gumby Framework</a>
                    </address>
          </div>


          <div class="seven columns">
            <div class="row">
              <ul class="socbtns">





              </ul>
            </div>
          </div>
        </footer>

    </div>


  <script src="http://xiaojianfeng.github.io/theme/js/libs/jquery-1.9.1.min.js"></script>
  <script src="http://xiaojianfeng.github.io/theme/js/libs/gumby.min.js"></script>
  <script src="http://xiaojianfeng.github.io/theme/js/plugins.js"></script>
</body>
</html>